---
import ReactIcon from "./ReactIcon.jsx";

interface Props {
  title: string;
  subtitle?: string;
  backgroundImage: string;
  ctaText?: string;
  ctaLink?: string;
  size?: 'full' | 'short'; // New prop to control height
}

const { 
  title, 
  subtitle, 
  backgroundImage, 
  ctaText, 
  ctaLink,
  size = 'full' 
} = Astro.props;

// Determine height class based on size prop
const heightClass = size === 'full' ? 'min-h-screen' : 'h-[60vh] min-h-[400px]';
---

<section class={`relative flex items-center justify-center overflow-hidden group ${heightClass}`}>
  
  <!-- Background Image with "Ken Burns" Slow Zoom Effect -->
  <div class="absolute inset-0 overflow-hidden">
    <div
      class="absolute inset-0 bg-cover bg-center bg-no-repeat transition-transform duration-[10s] ease-out scale-100 animate-slow-zoom"
      style={`background-image: url(${backgroundImage});`}
    ></div>
  </div>

  <!-- Gradient Overlay (Better readability than flat color) -->
  <div class="absolute inset-0 bg-gradient-to-b from-vintage-dark/30 via-vintage-dark/40 to-vintage-dark/80"></div>

  <!-- Content Container -->
  <div class="relative z-10 text-center text-white px-4 max-w-5xl mx-auto flex flex-col items-center">
    
    {subtitle && (
      <div class="opacity-0 animate-fade-in-down mb-6 flex flex-col items-center">
        <!-- Decorative vertical line for luxury feel -->
        <div class="h-12 w-px bg-vintage-gold/70 mb-4"></div>
        <span class="block text-vintage-gold text-sm md:text-base font-sans font-bold tracking-[0.25em] uppercase shadow-sm">
          {subtitle}
        </span>
      </div>
    )}

    <h1 class="opacity-0 animate-fade-in-up text-5xl md:text-7xl lg:text-8xl font-serif font-bold mb-8 text-white leading-[1.1] text-shadow-sm drop-shadow-lg text-balance">
      {title}
    </h1>

    {ctaText && ctaLink && (
      <div class="opacity-0 animate-fade-in-up delay-300">
        <a
          href={ctaLink}
          class="group relative inline-flex items-center gap-3 px-10 py-4 bg-transparent border border-vintage-gold text-white font-sans font-bold uppercase tracking-wider overflow-hidden transition-all duration-300 hover:bg-vintage-gold hover:text-vintage-dark hover:border-transparent"
        >
          <span class="relative z-10">{ctaText}</span>
          <!-- Arrow appears on hover -->
          <ReactIcon name="HiArrowRight" className="h-5 w-5 transform -translate-x-2 opacity-0 transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 relative z-10" />
        </a>
      </div>
    )}
  </div>

  <!-- Scroll Indicator (Only show on full screen) -->
  {size === 'full' && (
    <div class="absolute bottom-12 left-1/2 transform -translate-x-1/2 animate-bounce opacity-80 hidden md:block">
      <div class="text-white flex flex-col items-center gap-2">
        <span class="text-[10px] uppercase tracking-[0.4em] font-bold opacity-50">Discover</span>
        <ReactIcon name="HiChevronDown" size={24} />
      </div>
    </div>
  )}
</section>

<style>
  /* Custom Animations not usually in default Tailwind */
  
  @keyframes slow-zoom {
    0% { transform: scale(1); }
    100% { transform: scale(1.1); }
  }

  .animate-slow-zoom {
    animation: slow-zoom 20s ease-out forwards;
  }

  @keyframes fade-in-up {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  .animate-fade-in-up {
    animation: fade-in-up 1s ease-out forwards;
  }
  
  .delay-300 {
    animation-delay: 0.3s;
  }

  @keyframes fade-in-down {
    0% { opacity: 0; transform: translateY(-20px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  .animate-fade-in-down {
    animation: fade-in-down 1s ease-out forwards;
  }

  @keyframes scroll-down {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(15px); opacity: 0; }
  }

  .animate-scroll-down {
    animation: scroll-down 2s infinite;
  }
</style>