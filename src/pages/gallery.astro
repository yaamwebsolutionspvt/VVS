---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import ReactIcon from '../components/ReactIcon.jsx';

const heroImage = "https://storage.eduyaam.com/uploads/20260201163243_Gemini_Generated_Image_m4c1yjm4c1yjm4c1.png";

// Enhanced Image Data with Categories
const galleryItems = [
  { 
    src: "https://storage.eduyaam.com/uploads/20260201163243_Gemini_Generated_Image_m4c1yjm4c1yjm4c1.png",
    alt: "Entrance View", 
    category: "exterior",
    caption: "Grand Entrance" 
  },
  
  { 
    src: "https://storage.eduyaam.com/uploads/20260123052422_920808ba-ac28-4388-87e8-54544bccbb07.jpg", 
    alt: "Spa Interior", 
    category: "spa",
    caption: "Private Treatment Suite" 
  },
  { 
    src: "https://images.unsplash.com/photo-1554118811-1e0d58224f24?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80", 
    alt: "Coffee Shop Details", 
    category: "social",
    caption: "Artisan Brews" 
  },
  { 
    src: "https://storage.eduyaam.com/uploads/20260123052409_5b56515d-b8d5-4db7-965d-fcdb52ac3d5d.jpg", 
    alt: "Gym Equipment", 
    category: "gym",
    caption: "State-of-the-art Equipment" 
  },
  { 
    src: "https://storage.eduyaam.com/uploads/20260123052401_5b63d73a-3bc2-45a3-896e-baca4ace8347.jpg", 
    alt: "Lounge Area", 
    category: "social",
    caption: "The Members Lounge" 
  },
  // Duplicating a few to show off masonry effect better (in a real app, use unique images)
  { 
    src: "https://images.unsplash.com/photo-1540555700478-4be289fbecef?ixlib=rb-4.0.3", 
    alt: "Spa Detail", 
    category: "spa",
    caption: "Aromatherapy Oils" 
  },
  { 
    src: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?ixlib=rb-4.0.3", 
    alt: "Gym Weights", 
    category: "gym",
    caption: "Free Weights Zone" 
  }
];
---

<Layout 
  title="Photo Gallery - Vintage Villa & Spa Pahalgam | Kashmir Resort Images"
  description="Explore Vintage Villa Pahalgam through our photo gallery. View luxury rooms, spa facilities, gym, dining areas & stunning Kashmir mountain views. Your visual journey starts here."
  keywords="vintage villa photos, pahalgam resort gallery, spa photos kashmir, luxury hotel images pahalgam, vintage villa gallery, kashmir spa images"
>
  <Header />

  <Hero 
    title="Visual Journey"
    subtitle="A Glimpse into Paradise"
    backgroundImage={heroImage}
  />

  <section class="py-20 px-4 bg-vintage-cream min-h-screen">
    <div class="container mx-auto">
      
      <!-- Intro Text -->
      <div class="text-center max-w-3xl mx-auto mb-12">
        <p class="text-xl font-serif text-vintage-dark leading-relaxed">
          Every corner of Vintage Villa is designed to inspire. From the architectural 
          elegance of our exteriors to the calming ambiance of our treatment rooms.
        </p>
      </div>

      <!-- Filter Buttons -->
      <div class="flex flex-wrap justify-center gap-4 mb-12" id="gallery-filters">
        <button class="filter-btn active px-6 py-2 border border-vintage-gold bg-vintage-gold text-white rounded-full uppercase text-xs font-bold tracking-widest transition-all" data-filter="all">All Moments</button>
        <button class="filter-btn px-6 py-2 border border-vintage-dark text-vintage-dark hover:bg-vintage-dark hover:text-white rounded-full uppercase text-xs font-bold tracking-widest transition-all" data-filter="spa">The Spa</button>
        <button class="filter-btn px-6 py-2 border border-vintage-dark text-vintage-dark hover:bg-vintage-dark hover:text-white rounded-full uppercase text-xs font-bold tracking-widest transition-all" data-filter="gym">Gym</button>
        <button class="filter-btn px-6 py-2 border border-vintage-dark text-vintage-dark hover:bg-vintage-dark hover:text-white rounded-full uppercase text-xs font-bold tracking-widest transition-all" data-filter="social">Social & Cafe</button>
      </div>
      
      <!-- Masonry Grid -->
      <div class="columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6" id="gallery-grid">
        {galleryItems.map((item) => (
          <div class="gallery-item break-inside-avoid relative group overflow-hidden rounded-sm cursor-pointer shadow-md hover:shadow-xl transition-all duration-300" data-category={item.category} onclick={`openLightbox('${item.src}', '${item.caption}')`}>
            <img 
              src={item.src} 
              alt={item.alt} 
              class="w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-110" 
              loading="lazy"
            />
            <!-- Overlay on Hover -->
            <div class="absolute inset-0 bg-vintage-dark/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
              <div class="text-center p-4 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300">
                <span class="text-vintage-gold text-xs uppercase tracking-widest block mb-2">{item.category}</span>
                <p class="text-white font-serif text-xl italic">"{item.caption}"</p>
                <div class="mt-4 inline-block p-2 border border-white/30 rounded-full text-white">
                  <ReactIcon name="HiMagnifyingGlassPlus" size={24} />
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>

    </div>
  </section>

  <!-- Parallax Break Section -->
  <section class="relative h-[60vh] min-h-[400px] overflow-hidden flex items-center justify-center">
    <!-- Background Image -->
    <div class="absolute inset-0">
      <img 
        src={galleryItems[1].src} 
        alt="Experience Vintage Villa" 
        class="w-full h-full object-cover object-center animate-parallax-zoom"
        style="object-position: center center;"
      />
    </div>
    <div class="absolute inset-0 bg-black/40"></div>
    <div class="relative z-10 text-center px-4">
      <h2 class="text-4xl md:text-6xl font-serif font-bold text-white mb-6">Experience It Live</h2>
      <a href="/contact" class="inline-block px-10 py-4 bg-white text-vintage-dark font-sans font-bold uppercase tracking-wider hover:bg-vintage-gold hover:text-white transition-all">
        Book a Tour
      </a>
    </div>
  </section>

  <style>
    @keyframes parallax-zoom {
      0% {
        transform: scale(1);
      }
      100% {
        transform: scale(1.1);
      }
    }

    .animate-parallax-zoom {
      animation: parallax-zoom 8s ease-in-out infinite alternate;
    }
  </style>

  <!-- Lightbox Modal (Hidden by default) -->
  <div id="lightbox" class="fixed inset-0 z-50 bg-black/95 hidden items-center justify-center opacity-0 transition-opacity duration-300">
    <button id="lightbox-close" class="absolute top-6 right-6 text-white hover:text-vintage-gold z-50">
      <ReactIcon name="HiXMark" size={40} />
    </button>
    <div class="max-w-5xl max-h-screen p-4 relative text-center">
      <img id="lightbox-img" src="https://storage.eduyaam.com/uploads/20260123052422_920808ba-ac28-4388-87e8-54544bccbb07.jpg" alt="Full screen" class="max-h-[85vh] max-w-full object-contain mx-auto shadow-2xl border-4 border-white/10" />
      <p id="lightbox-caption" class="text-vintage-gold font-serif text-xl mt-4 tracking-wide"></p>
    </div>
  </div>

  <Footer />
</Layout>

<!-- Client-side Scripts for Filtering and Lightbox -->
<script is:inline>
  // Filter Logic
  const filterButtons = document.querySelectorAll('.filter-btn');
  const galleryItems = document.querySelectorAll('.gallery-item');

  filterButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      // Remove active class from all
      filterButtons.forEach(b => {
        b.classList.remove('bg-vintage-gold', 'text-white', 'border-vintage-gold');
        b.classList.add('text-vintage-dark', 'border-vintage-dark');
      });
      // Add active class to clicked
      btn.classList.remove('text-vintage-dark', 'border-vintage-dark');
      btn.classList.add('bg-vintage-gold', 'text-white', 'border-vintage-gold');

      const category = btn.getAttribute('data-filter');

      galleryItems.forEach(item => {
        if (category === 'all' || item.getAttribute('data-category') === category) {
          item.style.display = 'block';
          // Small timeout to allow display block to render before opacity for fade effect
          setTimeout(() => item.style.opacity = '1', 10);
        } else {
          item.style.opacity = '0';
          setTimeout(() => item.style.display = 'none', 300);
        }
      });
    });
  });

  // Lightbox Logic
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  const lightboxCaption = document.getElementById('lightbox-caption');
  const lightboxClose = document.getElementById('lightbox-close');

  window.openLightbox = (src, caption) => {
    lightboxImg.src = src;
    lightboxCaption.textContent = caption;
    lightbox.classList.remove('hidden');
    // Trigger reflow
    void lightbox.offsetWidth;
    lightbox.classList.remove('opacity-0');
    document.body.style.overflow = 'hidden'; // Prevent scrolling background
  };

  const closeLightbox = () => {
    lightbox.classList.add('opacity-0');
    setTimeout(() => {
      lightbox.classList.add('hidden');
      lightboxImg.src = '';
      document.body.style.overflow = ''; // Restore scrolling
    }, 300);
  };

  lightboxClose.addEventListener('click', closeLightbox);
  
  // Close on clicking outside image
  lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) closeLightbox();
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeLightbox();
  });
</script>